"use strict";!function(n,e){function a(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}function i(e){for(var t in e)0===e[t].length&&delete e[t]}function r(e,t){return e.match(/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)?"":"Invalid email format."}function l(e){return'<p class="input-error">'.concat(e,"</p>")}function s(e,t){e.insertAdjacentHTML("afterend",l(t)),e.classList.add("is-invalid")}function o(e){var t=e.parentNode.querySelector(".input-error");e.classList.remove("is-invalid"),t&&t.remove()}function c(e){for(var t=e.querySelectorAll(".input-error"),r=e.querySelectorAll(".is-invalid"),n=0;n<t.length;n++)t[n].remove();for(var a=0;a<r.length;a++)r[a].classList.remove("is-invalid")}var u,d,m=e.getElementById("login-form");m&&(m.setAttribute("novalidate","true"),u=e.getElementById("email"),d=e.getElementById("password"),m.addEventListener("submit",function(e){e.preventDefault();var t="";(e=(e=m).querySelector(".alert--error").parentNode)&&e.remove(),e="Enter the correct password and email.",0!==(t=0!==r(u.value).length||0==d.value.length?e:"").length?m.insertAdjacentHTML("afterbegin",'<div class="mb-m">\n                    <p class="alert alert--error">'.concat(t,"</p>\n                </div>")):this.submit()},!1));var g,h,f,v=e.getElementById("registration-form");if(v){v.setAttribute("novalidate","true");var t,p={firstname:{callback:function(e,t){return e.length<2?"Firstname must not be shorter than 2 characters.":50<e.length?"Firstname must not be longer than 50 characters.":e.match(/^[a-zA-Z]*$/)?"":"Only letters allowed."},elem:v.querySelector("#firstname"),isValid:!1},lastname:{callback:function(e,t){return e.length<2?"Lastname must not be shorter than 2 characters.":50<e.length?"Lastname must not be longer than 50 characters.":e.match(/^[a-zA-Z]*$/)?"":"Only letters allowed."},elem:v.querySelector("#lastname"),isValid:!1},email:{callback:r,elem:v.querySelector("#email"),isValid:!1},password:{callback:function(e,t){return e.length<8?"Password must not be shorter than 8 characters.":""},elem:v.querySelector("#password"),isValid:!1},"password-repeat":{callback:function(e,t){return e!==t.password.elem.value?"Passwords must match.":""},elem:v.querySelector("#password-repeat"),isValid:!1}},b=(g=function(e){var t=e.target,e=p[t.id].callback(t.value,p);o(t),0!==e.length?(s(t,e),p[t.id].isValid=!1):(o(t),p[t.id].isValid=!0)},h=100,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];clearTimeout(f),f=setTimeout(function(){clearTimeout(f),g.apply(void 0,t)},h)});for(t in p)p[t].elem.addEventListener("input",b,!1);p.email.elem.addEventListener("blur",function(e){var t,r=e.target;p[r.id].isValid&&(e=n.location.href+"/checkemail",(t=new XMLHttpRequest).open("POST",e),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("email=".concat(encodeURIComponent(r.value))),t.addEventListener("load",function(e){o(r),"true"===t.response&&s(r,"A user with this Email already exists.")},!1),t.addEventListener("error",function(e){o(r)},!1))},!1),v.addEventListener("submit",function(e){e.preventDefault();var t,r={};for(t in c(v),p)r[t]=p[t].callback(p[t].elem.value,p);if(i(r),a(r))this.submit();else for(var n in r)s(p[n].elem,r[n])},!1)}var y,w,E=e.getElementById("form-review");E&&(E.setAttribute("novalidate","true"),y=e.getElementById("form-comment-review"),w=e.getElementsByName("rating"),E.addEventListener("submit",function(e){e.preventDefault();e={};c(E),e.description=y.value.length<2?"Review must not be shorter than 2 characters.":500<y.value.length?"Review must not be longer than 500 characters.":"",e.rating=function(){for(var e=null,t=0;t<w.length;t++)if(w[t].checked){e=w[t];break}return e?5<e.value||e.value<1?"Rating must be between 1 and 5.":"":"Please select a rating."}(),0!==e.description.length&&s(y,e.description),0!==e.rating.length&&w[0].parentNode.parentNode.insertAdjacentHTML("afterend",l(e.rating)),i(e),a(e)&&this.submit()},!1));var L,A,B,I,T,k=e.getElementById("add-recipe-form");k&&(k.setAttribute("novalidate","true"),L=e.getElementById("form-title"),A=e.getElementById("form-description"),B=e.getElementsByName("ingredients[]"),I=e.getElementsByName("categories[]"),T=e.getElementById("form-images"),k.addEventListener("submit",function(e){e.preventDefault();var r=T.files,e={};c(k),e.title=L.value.length<2?"Title must not be shorter than 2 characters.":500<L.value.length?"Title must not be longer than 500 characters.":"",e.description=A.value.length<2?"Description must not be shorter than 2 characters.":1e4<A.value.length?"Description must not be longer than 10 000 characters.":"",e.ingredients=function(){for(var e=0;e<B.length;e++)if(B[e].checked)return"";return"Please select at least one ingredient."}(),e.categories=function(){for(var e=0;e<I.length;e++)if(I[e].checked)return"";return"Please select at least one category."}(),e.images=function(){if(0===r.length)return"Images are required.";for(var e=0;e<r.length;e++)if("image/jpeg"!==r.item(e).type)return"Unsupported image format. Only JPEG.";for(var t=0;t<r.length;t++)if(5242880<r.item(t).size)return"The image must not be larger than 5 megabytes.";return""}(),0!==e.title.length&&s(L,e.title),0!==e.description.length&&s(A,e.description),0!==e.ingredients.length&&B[0].parentNode.parentNode.insertAdjacentHTML("afterend",l(e.ingredients)),0!==e.categories.length&&I[0].parentNode.parentNode.insertAdjacentHTML("afterend",l(e.categories)),0!==e.images.length&&s(T,e.images),i(e),a(e)&&this.submit()},!1))}(window,document);